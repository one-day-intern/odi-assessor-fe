import React, { useEffect } from "react";
import { AnimatePresence, motion, useAnimationControls } from "framer-motion";

import styles from "./NotificationGroup.module.css";

interface NotificationGroupProps {
  count: number;
}

const NotificationGroup = ({ count }: NotificationGroupProps) => {
  const controls = useAnimationControls();

  useEffect(() => {
    controls.start({
      y: [0, -10, 0, -5, 0],
    });
  }, [count, controls]);

  return (
    <button className={styles["user-group__notif"]}>
      <svg
        width="23"
        height="22"
        viewBox="0 0 23 22"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M4.89413 11.4258L5.66432 12.0636C5.81285 11.8843 5.89413 11.6587 5.89413 11.4258H4.89413ZM18.1742 11.4258H17.1742C17.1742 11.6587 17.2555 11.8843 17.404 12.0636L18.1742 11.4258ZM1.5781 15.4301L0.80791 14.7923L1.5781 15.4301ZM1.64376 15.7213L1.17963 16.6071H1.17963L1.64376 15.7213ZM21.4903 15.4301L22.2604 14.7923L21.4903 15.4301ZM21.4246 15.7213L21.8887 16.6071L21.4246 15.7213ZM2.34829 16.0679L5.66432 12.0636L4.12394 10.788L0.80791 14.7923L2.34829 16.0679ZM5.89413 11.4258V9.07264H3.89413V11.4258H5.89413ZM17.1742 9.07264V11.4258H19.1742V9.07264H17.1742ZM17.404 12.0636L20.7201 16.0679L22.2604 14.7923L18.9444 10.788L17.404 12.0636ZM0.80791 14.7923C0.292071 15.4152 0.54709 16.2757 1.17963 16.6071L2.10789 14.8356C2.51275 15.0477 2.70631 15.6356 2.34829 16.0679L0.80791 14.7923ZM20.7201 16.0679C20.362 15.6356 20.5556 15.0477 20.9605 14.8356L21.8887 16.6071C22.5213 16.2757 22.7763 15.4152 22.2604 14.7923L20.7201 16.0679ZM20.9605 14.8356C15.1327 17.8893 7.93569 17.8893 2.10789 14.8356L1.17963 16.6071C7.58878 19.9654 15.4796 19.9654 21.8887 16.6071L20.9605 14.8356ZM19.1742 9.07264C19.1742 5.1082 15.6581 2.05901 11.5342 2.05901V4.05901C14.7446 4.05901 17.1742 6.39462 17.1742 9.07264H19.1742ZM5.89413 9.07264C5.89413 6.39462 8.32373 4.05901 11.5342 4.05901V2.05901C7.41024 2.05901 3.89413 5.1082 3.89413 9.07264H5.89413ZM14.2873 18.4199C14.2873 18.9389 14.077 19.2822 13.7084 19.5341C13.2989 19.814 12.6507 20 11.8229 20V22C12.9084 22 13.9924 21.7624 14.8368 21.1854C15.722 20.5805 16.2873 19.6337 16.2873 18.4199H14.2873ZM11.8229 20C10.9951 20 10.3469 19.814 9.93742 19.5341C9.56878 19.2822 9.35852 18.939 9.35852 18.4199H7.35852C7.35852 19.6337 7.92378 20.5805 8.80899 21.1854C9.65334 21.7624 10.7374 22 11.8229 22V20ZM16.2873 18.4199V17.897H14.2873V18.4199H16.2873ZM9.35852 18.4199V17.897H7.35852V18.4199H9.35852ZM14.122 2.17658C14.122 0.883561 12.9971 0 11.8229 0V2C11.9366 2 12.0213 2.04151 12.0702 2.08582C12.1175 2.12867 12.122 2.16188 12.122 2.17658H14.122ZM11.8229 0C10.6486 0 9.52374 0.883561 9.52374 2.17658H11.5237C11.5237 2.16188 11.5282 2.12867 11.5755 2.08582C11.6245 2.04151 11.7092 2 11.8229 2V0ZM12.122 2.17658V3.05901H14.122V2.17658H12.122ZM9.52374 2.17658V3.05901H11.5237V2.17658H9.52374Z"
          fill="#85AEFF"
        />
      </svg>
      <AnimatePresence>
        {count !== 0 && (
          <motion.div
            animate={controls}
            className={styles["user-group__notif__count"]}
          >
            <p>{count >= 10 ? "9+" : count}</p>
          </motion.div>
        )}
      </AnimatePresence>
    </button>
  );
};

export default NotificationGroup;
